(function(){"use strict";var t={9351:function(t,e,s){var a=s(144),n=s(998),l=s(6232),r=s(4562),o=s(266),i=s(1625),c=s(3059),u=s(1713),d=function(){var t=this,e=t._self._c,a=t._self._setupProxy;return e(n.Z,[e(l.Z,{attrs:{app:"",color:"red"}},[e(u.Z,{staticClass:"d-flex align-center justify-center"},[e(o.Z,{attrs:{cols:1}},[e(i.Z,{attrs:{alt:"Grinch",contain:"",src:s(9098),height:"35"}})],1),e(o.Z,{attrs:{cols:3}},[e(r.Z,{attrs:{to:"/reservations","min-width":"164",rel:"noopener noreferrer",variant:"text",color:"amber"}},[t._v(" Reservations ")])],1),e(o.Z,{attrs:{cols:3}},[e(r.Z,{attrs:{to:"/waitlist","min-width":"164",rel:"noopener noreferrer",variant:"text",color:"green darken-1"}},[t._v(" Waitlist ")])],1),e(o.Z,{attrs:{cols:3}},[e(r.Z,{attrs:{to:"/openseats","min-width":"164",rel:"noopener noreferrer",variant:"text",color:"yellow"}},[t._v(" Open Seats ")])],1),e(o.Z,{attrs:{cols:1}},[e(i.Z,{attrs:{alt:"Grinch",contain:"",src:s(9098),height:"35"}})],1)],1)],1),e(c.Z,[e("router-view")],1),e("div",{attrs:{id:"footer"}},[e(a.FooterNav)],1)],1)},m=[],v=s(8271),p=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(v.Z,{staticClass:"text-body-2 font-weight-light mb-n1 mt-10",attrs:{color:"red",padless:!0}},[t._v("Â  ")])},f=[],h={__name:"FooterNav",setup(t){return{__sfc:!0}}},g=h,_=s(1001),Z=(0,_.Z)(g,p,f,!1,null,null,null),b=Z.exports;const x={name:"App",components:{FooterNav:b},data:()=>({})};var y=Object.assign(x,{setup(t){return{__sfc:!0,FooterNav:b}}}),k=y,w=(0,_.Z)(k,d,m,!1,null,null,null),C=w.exports,I=s(8345),O=s(2118),S=s(4324),A=s(9422),E=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e(O.Z,{staticClass:"fill-height"},[e(A.Z,{staticClass:"d-flex align-center text-center"},[e("div",{staticClass:"text-body-2 font-weight-light mb-n1 mt-10 pb-5"},[t._v(" Welcome to ")]),e("h1",{staticClass:"text-h2 font-weight-bold"},[t._v("Walkthrough Christmas Admin")]),e(i.Z,{staticClass:"shrink mr-2",attrs:{alt:"Grinch",contain:"",src:s(9417),transition:"scale-transition",height:"250"}}),e("div",{staticClass:"py-3"}),e(u.Z,{staticClass:"d-flex align-center justify-center"},[e(o.Z,{attrs:{cols:"auto"}},[e(r.Z,{attrs:{to:"/reservations","min-width":"164",rel:"noopener noreferrer",variant:"text",color:"amber"}},[e(S.Z,{attrs:{icon:"mdi-domain",size:"large",start:""}}),t._v(" Reservations ")],1)],1),e(o.Z,{attrs:{cols:"auto"}},[e(r.Z,{attrs:{to:"/waitlist","min-width":"164",rel:"noopener noreferrer",variant:"text",color:"green darken-1"}},[e(S.Z,{attrs:{icon:"mdi-domain",size:"large",start:""}}),t._v(" Waitlist ")],1)],1),e(o.Z,{attrs:{cols:"auto"}},[e(r.Z,{attrs:{to:"/openseats","min-width":"164",rel:"noopener noreferrer",variant:"text",color:"yellow"}},[e(S.Z,{attrs:{icon:"mdi-domain",size:"large",start:""}}),t._v(" Open Seats ")],1)],1)],1)],1)],1)],1)},D=[],j={__name:"MainPage",setup(t){return{__sfc:!0}}},H=j,P=(0,_.Z)(H,E,D,!1,null,null,null),B=P.exports,T=s(9582),$=s(4886),N=s(1641),G=s(9930),J=s(9223),z=s(3153),F=s(9258),L=s(3687),W=s(7808),M=s(6313),Y=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e(O.Z,{},[e(u.Z,{attrs:{dense:""}},[e(o.Z,{attrs:{cols:12}},[e(s.AssignErrorDialog,{attrs:{"dialog-assign-error":s.dialogAssignError},on:{closeThisDialog:t=>s.dialogAssignError=!1}}),s.loading?e("div",{staticClass:"d-flex align-center justify-center pt-10 pb-5"},[e(s.ProgressBar)],1):e("div",[e(T.Z,{attrs:{outlined:"",shaped:""}},[e($.EB,[e(o.Z,{attrs:{cols:6}},[t._v("Waitlist")]),e(o.Z,{attrs:{cols:6}},[e(W.Z,{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:s.search,callback:function(t){s.search=t},expression:"search"}})],1)],1),e(N.Z,{staticClass:"elevation-1",attrs:{"loading-text":"Loading... Please wait",search:s.search,"sort-by":s.sortBy,"sort-desc":s.sortDesc,headers:s.headers,items:s.reservations,"items-per-page":25},on:{"update:sortBy":function(t){s.sortBy=t},"update:sort-by":function(t){s.sortBy=t},"update:sortDesc":function(t){s.sortDesc=t},"update:sort-desc":function(t){s.sortDesc=t}},scopedSlots:t._u([{key:"top",fn:function(){return[e(M.Z,{attrs:{flat:""}},[e("div",t._l(s.wtc_dates,(function(a){return e("span",{key:a.search},[e(r.Z,{attrs:{color:"green darken-1"},on:{click:function(t){return s.setSearch(a.search)}}},[t._v(" "+t._s(a.button)+" ")]),e(J.Z,{staticClass:"mx-4",attrs:{inset:"",vertical:""}})],1)})),0),e(G.Z,{attrs:{"max-width":"500px"},model:{value:s.dialog,callback:function(t){s.dialog=t},expression:"dialog"}},[e(T.Z,[e($.EB,[e("span",{staticClass:"text-h5"},[t._v("Edit")])]),e($.ZB,[e(O.Z,[e(u.Z,[e(o.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(W.Z,{attrs:{label:"Name"},model:{value:s.editedItem.name,callback:function(e){t.$set(s.editedItem,"name",e)},expression:"editedItem.name"}})],1),e(o.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(W.Z,{attrs:{label:"Email"},model:{value:s.editedItem.email,callback:function(e){t.$set(s.editedItem,"email",e)},expression:"editedItem.email"}})],1),e(o.Z,{attrs:{cols:"12",sm:"6"}},[e(W.Z,{attrs:{label:"Adults",type:"number"},model:{value:s.editedItem.adult_seats,callback:function(e){t.$set(s.editedItem,"adult_seats",e)},expression:"editedItem.adult_seats"}})],1),e(o.Z,{attrs:{cols:"12",sm:"6"}},[e(W.Z,{attrs:{label:"Child",type:"number"},model:{value:s.editedItem.child_seats,callback:function(e){t.$set(s.editedItem,"child_seats",e)},expression:"editedItem.child_seats"}})],1)],1)],1)],1),e($.h7,[e(L.Z),e(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return s.close()}}},[t._v(" Cancel ")]),e(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return s.save(s.editedItem)}}},[t._v(" Save ")])],1)],1)],1),e(G.Z,{attrs:{"max-width":"500px"},model:{value:s.dialogDelete,callback:function(t){s.dialogDelete=t},expression:"dialogDelete"}},[e(T.Z,[e($.EB,{staticClass:"text-h5"},[t._v("Are you sure you want to delete this waitlist?")]),e($.h7,[e(L.Z),e(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return s.closeDelete()}}},[t._v("Cancel")]),e(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return s.deleteItemConfirm(s.editedItem)}}},[t._v("OK")]),e(L.Z)],1)],1)],1),e(G.Z,{attrs:{"max-width":"500px"},model:{value:s.dialogAssign,callback:function(t){s.dialogAssign=t},expression:"dialogAssign"}},[e(T.Z,[e($.EB,[e("span",{staticClass:"text-h5"},[t._v("Assign Seats")])]),e($.ZB,[e(O.Z,[e(u.Z,[e(o.Z,{attrs:{cols:"12",sm:"12"}},[t._v(" "+t._s(s.assignItem.name)+" ")]),e(o.Z,{attrs:{cols:"12",sm:"12"}},[t._v(" "+t._s(s.assignItem.email)+" ")]),e(o.Z,{attrs:{cols:"12",sm:"3"}},[e(W.Z,{attrs:{label:"Adults",type:"number"},model:{value:s.assignItem.adult_seats,callback:function(e){t.$set(s.assignItem,"adult_seats",e)},expression:"assignItem.adult_seats"}})],1),e(o.Z,{attrs:{cols:"12",sm:"3"}},[e(W.Z,{attrs:{label:"Child",type:"number"},model:{value:s.assignItem.child_seats,callback:function(e){t.$set(s.assignItem,"child_seats",e)},expression:"assignItem.child_seats"}})],1),e(o.Z,{staticClass:"d-flex",attrs:{cols:"12"}},[e(z.Z,{attrs:{items:s.currentOpenSeats,"item-text":"displayValue","item-value":"id",label:"Pick Time",solo:""},model:{value:s.assignItem.openSpot,callback:function(e){t.$set(s.assignItem,"openSpot",e)},expression:"assignItem.openSpot"}})],1)],1)],1)],1),e($.h7,[e(L.Z),e(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return s.closeAssign()}}},[t._v(" Cancel ")]),e(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return s.saveAssign(s.assignItem)}}},[t._v(" Save ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:a}){return[e(S.Z,{staticClass:"mr-2",on:{click:function(t){return s.assign(a)}}},[t._v(" mdi-clipboard-check ")]),e(S.Z,{staticClass:"mr-2",on:{click:function(t){return s.editItem(a)}}},[t._v(" mdi-pencil ")]),e(S.Z,{on:{click:function(t){return s.deleteItem(a)}}},[t._v(" mdi-delete ")])]}},{key:"item.phone",fn:function({item:a}){return[e("div",{staticClass:"text-right"},[t._v(" "+t._s(s.formatPhone(a.phone))+" ")])]}}])}),e(F.Z,{attrs:{timeout:3e3,color:s.snackColor},scopedSlots:t._u([{key:"action",fn:function({attrs:a}){return[e(r.Z,t._b({attrs:{text:""},on:{click:function(t){s.snack=!1}}},"v-btn",a,!1),[t._v(" Close ")])]}}]),model:{value:s.snack,callback:function(t){s.snack=t},expression:"snack"}},[t._v(" "+t._s(s.snackText)+" ")])],1)],1)],1)],1)],1)},R=[],K=(s(7658),s(3305)),U=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(K.Z,{attrs:{size:50,color:"amber",indeterminate:""}})},V=[],q={__name:"ProgressBar",setup(t){return{__sfc:!0}}},Q=q,X=(0,_.Z)(Q,U,V,!1,null,null,null),tt=X.exports,et=function(){var t=this,e=t._self._c,a=t._self._setupProxy;return e("div",[e(G.Z,{attrs:{width:"500"},model:{value:a.dialogAssignError,callback:function(t){a.dialogAssignError=t},expression:"dialogAssignError"}},[e(T.Z,[e($.EB,{staticClass:"text-h5 red"},[t._v(" Assignment Error ")]),e($.ZB,[t._v(" Not enough spots! "),e(i.Z,{attrs:{alt:"Grinch",contain:"",src:s(9098),height:"35"}})],1),e(J.Z),e($.h7,[e(L.Z),e(r.Z,{attrs:{color:"brown",text:""},on:{click:function(e){return t.$emit("closeThisDialog",!0)}}},[e(S.Z,[t._v("mdi-emoticon-poop")])],1)],1)],1)],1)],1)},st=[];const at={name:"AssignErrorDialog"};var nt=Object.assign(at,{props:["dialogAssignError"],setup(t){const e=t,s=(0,a.Fl)((()=>e.dialogAssignError));return{__sfc:!0,props:e,dialogAssignError:s}}}),lt=nt,rt=(0,_.Z)(lt,et,st,!1,null,null,null),ot=rt.exports,it=s(4085);const ct={name:"BaseContent"};var ut=Object.assign(ct,{setup(t){const e=(0,it.tv)(),s=(0,a.iH)([]),n=(0,a.iH)([]),l=(0,a.iH)(""),r=(0,a.iH)(!1);async function o(t){r.value=!0;const s=JSON.parse(window.sessionStorage.getItem("jwt"));if(!s)return r.value=!1,e.push({path:"/login"}),null;if(s){const a={method:t.method,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.token}`}};"GET"!==t.method&&(a.body=JSON.stringify(t.params));const n=await fetch(`https://admin.walkthroughchristmas.com/admin-api${t.url}`,a).then((t=>403===t.status||401===t.status?(e.push({path:"/login"}),null):t)).catch((t=>{console.error(t)})).finally((()=>r.value=!1));return"full"===t.return?n:n.json()}}(0,a.bv)((async()=>{window.scrollTo(0,0),n.value=await o({url:"/dates",params:{},method:"GET"}),s.value=await o({url:"/waitlist",params:{},method:"GET"})}));const i=[{text:"Name",align:"start",sortable:!0,value:"name"},{text:"Email",value:"email"},{text:"Date",value:"formattedDate"},{text:"Adults",value:"adult_seats"},{text:"Child",value:"child_seats"},{text:"Total",value:"seats"},{text:"Phone",value:"phone"},{text:"Actions",value:"actions",sortable:!1}];function c(t){return t=t.replaceAll("(",""),t=t.replaceAll(")",""),t=t.replaceAll("+",""),t=t.replaceAll(" ",""),t=t.replaceAll("-",""),11===t.length&&(t=t.substring(1,11)),10===t.length&&(t=`(${t.substring(0,3)}) ${t.substring(3,6)}-${t.substring(6,10)}`),t}const u=(0,a.iH)(!1),d=(0,a.iH)(""),m=(0,a.iH)(""),v=(0,a.iH)(!1),p=(0,a.iH)(!1),f=(0,a.iH)(!1),h=(0,a.iH)(-1),g=(0,a.iH)({name:"",email:"",adult_seats:0,child_seats:0}),_=(0,a.iH)({name:"",email:"",adult_seats:0,child_seats:0}),Z=(0,a.iH)(-1),b=(0,a.iH)({}),x=(0,a.iH)([]);async function y(t){Z.value=s.value.indexOf(t),b.value=Object.assign({},t),x.value=await o({url:"/openseats",params:t,method:"POST"}),E.value=!1,f.value=!0}function k(t){h.value=s.value.indexOf(t),g.value=Object.assign({},t),v.value=!0}function w(t){h.value=s.value.indexOf(t),g.value=Object.assign({},t),p.value=!0}function C(t){o({url:"/waitlist",params:t,method:"DELETE"}),s.value.splice(h.value,1),O()}function I(){v.value=!1,(0,a.Y3)((()=>{g.value=Object.assign({},_.value),h.value=-1}))}function O(){p.value=!1,(0,a.Y3)((()=>{g.value=Object.assign({},_.value),h.value=-1}))}function S(){f.value=!1,Z.value=-1,b.value={}}function A(t){g.value.adult_seats=+g.value.adult_seats,g.value.child_seats=+g.value.child_seats,g.value.seats=+g.value.adult_seats+ +g.value.child_seats,o({url:"/waitlist",params:t,method:"POST"}),h.value>-1&&(Object.assign(s.value[h.value],g.value),I())}const E=(0,a.iH)(!1);async function D(t){const e={name:t.name,email:t.email,phone:t.phone,slotId:t.openSpot,seats:{adult:t.adult_seats,child:t.child_seats},uuid:t.uuid},a=await o({url:"/assignseats",params:e,method:"POST",return:"full"});200===a.status?Z.value>-1&&(s.value.splice(Z.value,1),S()):(E.value=!0,S())}const j=(0,a.iH)(""),H=(0,a.iH)(!1);function P(t){l.value=t,j.value="time_slot"}function B(){console.log("running closeAssignErrorDialog!"),E.value=!1}return{__sfc:!0,router:e,reservations:s,wtc_dates:n,search:l,loading:r,apiData:o,headers:i,formatPhone:c,snack:u,snackColor:d,snackText:m,dialog:v,dialogDelete:p,dialogAssign:f,editedIndex:h,editedItem:g,defaultItem:_,assignIndex:Z,assignItem:b,currentOpenSeats:x,assign:y,editItem:k,deleteItem:w,deleteItemConfirm:C,close:I,closeDelete:O,closeAssign:S,save:A,dialogAssignError:E,saveAssign:D,sortBy:j,sortDesc:H,setSearch:P,closeAssignErrorDialog:B,ProgressBar:tt,AssignErrorDialog:ot}}}),dt=ut,mt=(0,_.Z)(dt,Y,R,!1,null,null,null),vt=mt.exports,pt=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e(O.Z,{},[e(u.Z,{attrs:{dense:""}},[e(o.Z,{attrs:{cols:12}},[s.loading?e("div",{staticClass:"d-flex align-center justify-center pt-10 pb-5"},[e(s.ProgressBar)],1):e("div",[e(T.Z,{attrs:{outlined:"",shaped:""}},[e($.EB,[e(o.Z,{attrs:{cols:6}},[t._v("Reservations")]),e(o.Z,{attrs:{cols:6}},[e(W.Z,{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:s.search,callback:function(t){s.search=t},expression:"search"}})],1)],1),e(N.Z,{staticClass:"elevation-1",attrs:{"loading-text":"Loading... Please wait",search:s.search,"sort-by":s.sortBy,"sort-desc":s.sortDesc,headers:s.headers,items:s.reservations,"items-per-page":25},on:{"update:sortBy":function(t){s.sortBy=t},"update:sort-by":function(t){s.sortBy=t},"update:sortDesc":function(t){s.sortDesc=t},"update:sort-desc":function(t){s.sortDesc=t}},scopedSlots:t._u([{key:"top",fn:function(){return[e(M.Z,{attrs:{flat:""}},[e("div",t._l(s.wtc_dates,(function(a){return e("span",{key:a.search},[e(r.Z,{attrs:{color:"amber"},on:{click:function(t){return s.setSearch(a.search)}}},[t._v(" "+t._s(a.button)+" ")]),e(J.Z,{staticClass:"mx-4",attrs:{inset:"",vertical:""}})],1)})),0),e(G.Z,{attrs:{"max-width":"500px"},model:{value:s.dialog,callback:function(t){s.dialog=t},expression:"dialog"}},[e(T.Z,[e($.EB,[e("span",{staticClass:"text-h5"},[t._v("Edit")])]),e($.ZB,[e(O.Z,[e(u.Z,[e(o.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(W.Z,{attrs:{label:"Name"},model:{value:s.editedItem.name,callback:function(e){t.$set(s.editedItem,"name",e)},expression:"editedItem.name"}})],1),e(o.Z,{attrs:{cols:"12",sm:"6",md:"6"}},[e(W.Z,{attrs:{label:"Email"},model:{value:s.editedItem.email,callback:function(e){t.$set(s.editedItem,"email",e)},expression:"editedItem.email"}})],1),e(o.Z,{attrs:{cols:"12",sm:"6"}},[e(W.Z,{attrs:{label:"Adults",type:"number"},model:{value:s.editedItem.adult_seats,callback:function(e){t.$set(s.editedItem,"adult_seats",e)},expression:"editedItem.adult_seats"}})],1),e(o.Z,{attrs:{cols:"12",sm:"6"}},[e(W.Z,{attrs:{label:"Child",type:"number"},model:{value:s.editedItem.child_seats,callback:function(e){t.$set(s.editedItem,"child_seats",e)},expression:"editedItem.child_seats"}})],1)],1)],1)],1),e($.h7,[e(L.Z),e(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return s.close()}}},[t._v(" Cancel ")]),e(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return s.save(s.editedItem)}}},[t._v(" Save ")])],1)],1)],1),e(G.Z,{attrs:{"max-width":"500px"},model:{value:s.dialogDelete,callback:function(t){s.dialogDelete=t},expression:"dialogDelete"}},[e(T.Z,[e($.EB,{staticClass:"text-h5"},[t._v("Are you sure you want to delete this reservation?")]),e($.h7,[e(L.Z),e(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return s.closeDelete()}}},[t._v("Cancel")]),e(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return s.deleteItemConfirm(s.editedItem)}}},[t._v("OK")]),e(L.Z)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function({item:a}){return[e(S.Z,{staticClass:"mr-2",on:{click:function(t){return s.editItem(a)}}},[t._v(" mdi-pencil ")]),e(S.Z,{on:{click:function(t){return s.deleteItem(a)}}},[t._v(" mdi-delete ")])]}},{key:"item.phone",fn:function({item:a}){return[e("div",{staticClass:"text-right"},[t._v(" "+t._s(s.formatPhone(a.phone))+" ")])]}}])}),e(F.Z,{attrs:{timeout:3e3,color:s.snackColor},scopedSlots:t._u([{key:"action",fn:function({attrs:a}){return[e(r.Z,t._b({attrs:{text:""},on:{click:function(t){s.snack=!1}}},"v-btn",a,!1),[t._v(" Close ")])]}}]),model:{value:s.snack,callback:function(t){s.snack=t},expression:"snack"}},[t._v(" "+t._s(s.snackText)+" ")])],1)],1)])],1)],1)},ft=[];const ht={name:"BaseContent"};var gt=Object.assign(ht,{setup(t){const e=(0,it.tv)(),s=(0,a.iH)([]),n=(0,a.iH)([]),l=(0,a.iH)(""),r=(0,a.iH)(!1);async function o(t){r.value=!0;const s=JSON.parse(window.sessionStorage.getItem("jwt"));if(!s)return r.value=!1,e.push({path:"/login"}),null;if(s){const a={method:t.method,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.token}`}};"GET"!==t.method&&(a.body=JSON.stringify(t.params));const n=await fetch(`https://admin.walkthroughchristmas.com/admin-api${t.url}`,a).then((t=>403===t.status||401===t.status?(e.push({path:"/login"}),null):t)).catch((t=>{console.error(t)})).finally((()=>r.value=!1));return n.json()}}(0,a.bv)((async()=>{window.scrollTo(0,0),n.value=await o({url:"/dates",params:{},method:"GET"}),s.value=await o({url:"/reservations",params:{},method:"GET"})}));const i=[{text:"Name",align:"start",sortable:!0,value:"name"},{text:"Email",value:"email"},{text:"Date",value:"formattedDate"},{text:"Adults",value:"adult_seats"},{text:"Child",value:"child_seats"},{text:"Total",value:"reserved_seats"},{text:"Phone",value:"phone"},{text:"Actions",value:"actions",sortable:!1}];function c(t){return t=t.replaceAll("(",""),t=t.replaceAll(")",""),t=t.replaceAll("+",""),t=t.replaceAll(" ",""),t=t.replaceAll("-",""),11===t.length&&(t=t.substring(1,11)),10===t.length&&(t=`(${t.substring(0,3)}) ${t.substring(3,6)}-${t.substring(6,10)}`),t}const u=(0,a.iH)(!1),d=(0,a.iH)(""),m=(0,a.iH)(""),v=(0,a.iH)(!1),p=(0,a.iH)(!1),f=(0,a.iH)({name:"",email:"",adult_seats:0,child_seats:0}),h=(0,a.iH)({name:"",email:"",adult_seats:0,child_seats:0}),g=(0,a.iH)(-1);function _(t){g.value=s.value.indexOf(t),f.value=Object.assign({},t),v.value=!0}function Z(t){g.value=s.value.indexOf(t),f.value=Object.assign({},t),p.value=!0}function b(t){o({url:"/reservations",params:t,method:"DELETE"}),s.value.splice(g.value,1),y()}function x(){v.value=!1,(0,a.Y3)((()=>{f.value=Object.assign({},h.value),g.value=-1}))}function y(){p.value=!1,(0,a.Y3)((()=>{f.value=Object.assign({},h.value),g.value=-1}))}function k(t){f.value.adult_seats=+f.value.adult_seats,f.value.child_seats=+f.value.child_seats,f.value.reserved_seats=+f.value.adult_seats+ +f.value.child_seats,o({url:"/reservations",params:t,method:"POST"}),g.value>-1&&(Object.assign(s.value[g.value],f.value),x())}const w=(0,a.iH)(""),C=(0,a.iH)(!1);function I(t){l.value=t,w.value="time_slot"}return{__sfc:!0,router:e,reservations:s,wtc_dates:n,search:l,loading:r,apiData:o,headers:i,formatPhone:c,snack:u,snackColor:d,snackText:m,dialog:v,dialogDelete:p,editedItem:f,defaultItem:h,editedIndex:g,editItem:_,deleteItem:Z,deleteItemConfirm:b,close:x,closeDelete:y,save:k,sortBy:w,sortDesc:C,setSearch:I,ProgressBar:tt}}}),_t=gt,Zt=(0,_.Z)(_t,pt,ft,!1,null,null,null),bt=Zt.exports,xt=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e(O.Z,{},[e(u.Z,{attrs:{dense:""}},[e(o.Z,{attrs:{cols:12}},[s.loading?e("div",{staticClass:"d-flex align-center justify-center pt-10 pb-5"},[e(s.ProgressBar)],1):e("div",[e(T.Z,{attrs:{outlined:"",shaped:""}},[e($.EB,[e(o.Z,{attrs:{cols:6}},[t._v("Available Seats")]),e(o.Z,{attrs:{cols:6}},[e(W.Z,{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:s.search,callback:function(t){s.search=t},expression:"search"}})],1)],1),e(N.Z,{staticClass:"elevation-1",attrs:{cols:6,"loading-text":"Loading... Please wait",search:s.search,"sort-by":s.sortBy,"sort-desc":s.sortDesc,headers:s.headers,items:s.wtc_dates,"items-per-page":25},on:{"update:sortBy":function(t){s.sortBy=t},"update:sort-by":function(t){s.sortBy=t},"update:sortDesc":function(t){s.sortDesc=t},"update:sort-desc":function(t){s.sortDesc=t}},scopedSlots:t._u([{key:"top",fn:function(){return[e(M.Z,{attrs:{flat:""}},[e("div",t._l(s.filterDates,(function(a){return e("span",{key:a.search},[e(r.Z,{attrs:{color:"yellow"},on:{click:function(t){return s.setSearch(a.search)}}},[t._v(" "+t._s(a.button)+" ")]),e(J.Z,{staticClass:"mx-4",attrs:{inset:"",vertical:""}})],1)})),0)])]},proxy:!0},{key:"item.availableSeats",fn:function({item:s}){return[e("div",{staticClass:"text-right pr-10"},[e("strong",[t._v(t._s(s.availableSeats))])])]}}])})],1)],1)])],1)],1)},yt=[];const kt={name:"BaseContent"};var wt=Object.assign(kt,{setup(t){const e=(0,it.tv)(),s=(0,a.iH)([]),n=(0,a.iH)([]),l=(0,a.iH)(""),r=(0,a.iH)(!1);async function o(t){r.value=!0;const s=JSON.parse(window.sessionStorage.getItem("jwt"));if(!s)return r.value=!1,e.push({path:"/login"}),null;if(s){const a={method:t.method,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.token}`}};"GET"!==t.method&&(a.body=JSON.stringify(t.params));const n=await fetch(`https://admin.walkthroughchristmas.com/admin-api${t.url}`,a).then((t=>403===t.status||401===t.status?(e.push({path:"/login"}),null):t)).catch((t=>{console.error(t)})).finally((()=>r.value=!1));return n.json()}}(0,a.bv)((async()=>{window.scrollTo(0,0),s.value=await o({url:"/openseats",params:{},method:"GET"}),n.value=await o({url:"/dates",params:{},method:"GET"})}));const i=(0,a.iH)(""),c=(0,a.iH)(!1);function u(t){l.value=t,i.value="time_slot"}const d=[{text:"Day",value:"displayDay"},{text:"Display",value:"displayValue"},{text:"Available Seats",value:"availableSeats"}];return{__sfc:!0,router:e,wtc_dates:s,filterDates:n,search:l,loading:r,apiData:o,sortBy:i,sortDesc:c,setSearch:u,headers:d,ProgressBar:tt}}}),Ct=wt,It=(0,_.Z)(Ct,xt,yt,!1,null,null,null),Ot=It.exports,St=s(5125),At=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e(St.Z,{ref:"form"},[e(O.Z,{staticClass:"fill-height"},[e(A.Z,{staticClass:"d-flex align-center text-center"},[e("p",{staticClass:"pb-10"}),e(u.Z,{attrs:{dense:""}},[e(o.Z,{attrs:{cols:3}}),e(o.Z,{attrs:{cols:6}},[e(T.Z,{staticClass:"mb-10"},[e($.EB,{staticClass:"subheading font-weight-bold align-end text-right"},[t._v(" Login ")]),e(J.Z),e(u.Z,[e(o.Z,{attrs:{cols:1}}),e(o.Z,{attrs:{cols:10}},[e(W.Z,{staticClass:"pt-10",attrs:{label:"Username"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.login.apply(null,arguments)}},model:{value:s.username,callback:function(t){s.username=t},expression:"username"}})],1),e(o.Z,{attrs:{cols:1}}),e(o.Z,{attrs:{cols:1}}),e(o.Z,{attrs:{cols:10}},[e(W.Z,{attrs:{label:"Password",type:"password"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.login.apply(null,arguments)}},model:{value:s.password,callback:function(t){s.password=t},expression:"password"}})],1),e(o.Z,{attrs:{cols:1}}),e(J.Z),e(o.Z,{attrs:{cols:5}}),e(o.Z,{attrs:{cols:2}},[e(r.Z,{staticClass:"align-center text-center justify-center",on:{click:s.login}},[t._v(" login ")])],1),e(o.Z,{attrs:{cols:5}})],1)],1)],1),e(o.Z,{attrs:{cols:3}})],1)],1)],1)],1)},Et=[],Dt={__name:"LoginForm",emits:["updateHeader"],setup(t,{emit:e}){const s=(0,it.tv)(),n=(0,a.iH)(""),l=(0,a.iH)(""),r=(0,a.iH)("");async function o(){const t=await fetch("https://admin.walkthroughchristmas.com/admin-api/login",{method:"POST",body:JSON.stringify({username:n.value,password:l.value}),headers:{"Content-Type":"application/json"}}).finally((()=>({}))),e=await t.json();e.token?(window.sessionStorage.setItem("jwt",JSON.stringify(e)),s.push({name:"main"})):(n.value="",l.value="",r.value=e.message)}return(0,a.bv)((()=>{e("updateHeader",window.sessionStorage.getItem("jwt"))})),{__sfc:!0,router:s,username:n,password:l,message:r,emit:e,login:o}}},jt=Dt,Ht=(0,_.Z)(jt,At,Et,!1,null,null,null),Pt=Ht.exports;a.ZP.use(I.ZP);const Bt=[{path:"/login",name:"login",component:Pt},{path:"/",name:"main",component:B},{path:"/waitlist",name:"waitlist",component:vt},{path:"/reservations",name:"reservations",component:bt},{path:"/openseats",name:"openseats",component:Ot}],Tt=new I.ZP({mode:"history",routes:Bt});Tt.beforeEach((async(t,e,s)=>{if(t.matched.some((t=>t.meta.requiresAuth))){const e=window.sessionStorage.getItem("jwt"),a=e?JSON.parse(e):null;null===a?s({path:"/login",params:{nextUrl:t.fullPath}}):s()}else s()}));var $t=Tt,Nt=s(1705);a.ZP.use(Nt.Z);var Gt=new Nt.Z({});a.ZP.config.productionTip=!1,new a.ZP({router:$t,vuetify:Gt,render:t=>t(C)}).$mount("#app")},9417:function(t,e,s){t.exports=s.p+"img/9-97768_grinch.32fb94f4.png"},9098:function(t,e,s){t.exports=s.p+"img/small.d3ee3e8d.png"}},e={};function s(a){var n=e[a];if(void 0!==n)return n.exports;var l=e[a]={exports:{}};return t[a](l,l.exports,s),l.exports}s.m=t,function(){var t=[];s.O=function(e,a,n,l){if(!a){var r=1/0;for(u=0;u<t.length;u++){a=t[u][0],n=t[u][1],l=t[u][2];for(var o=!0,i=0;i<a.length;i++)(!1&l||r>=l)&&Object.keys(s.O).every((function(t){return s.O[t](a[i])}))?a.splice(i--,1):(o=!1,l<r&&(r=l));if(o){t.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}l=l||0;for(var u=t.length;u>0&&t[u-1][2]>l;u--)t[u]=t[u-1];t[u]=[a,n,l]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var n,l,r=a[0],o=a[1],i=a[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(i)var u=i(s)}for(e&&e(a);c<r.length;c++)l=r[c],s.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return s.O(u)},a=self["webpackChunkwtc_admin"]=self["webpackChunkwtc_admin"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(9351)}));a=s.O(a)})();
//# sourceMappingURL=app.32d738d4.js.map